  🔮 v2 完整版（計畫中）

  對話與脈絡管理

  - 多輪對話處理：處理不完整項目的互動式補充（要求補齊後才建立項目）
  - 對話歷史儲存：引入資料庫（Redis/DynamoDB）儲存 session
  - 對話脈絡管理：為每個使用者維護獨立的對話脈絡
  - 週期性對話清除：每週日晚上 8 點詢問使用者是否清除歷史對話脈絡
  - 對話脈絡自動摘要：超過 100 則訊息或 GPT token 限制的 80% 時自動摘要或截斷

  錯誤處理與重試

  - 持久化重試佇列：使用 SQS 或 Redis Queue
  - 指數退避重試策略：2s, 4s, 8s, 16s...
  - 自動重試通知：處理完成後發送確認訊息
  - 完整錯誤處理：妥善處理 GPT 和 webhook 不可用的情況

  即時資訊查詢

  - 天氣 API：查詢即時天氣資訊
  - 新聞 API：查詢即時新聞
  - 匯率查詢：查詢即時匯率（獨立於記帳功能）
  - 股價查詢：查詢即時股價

  週期性功能

  - 固定週期帳目提醒：根據 periodic_expenses.json 在到期日前 2 天提醒
  - 信用卡週期管理：提醒結帳日和繳款日
  - 週期性觸發規則：根據 trigger_rules.json 在每週日觸發提醒

  系統改進

  - 完整日誌系統：結構化日誌、持久化儲存（取代 v1 的 stdout 簡化版）


  ---
  🧪 v3 未來版（實驗性）

  不完整項目先建立後補充

  - 立即建立不完整項目：先發送 webhook（品項必填，金額和付款方式可為空）
  - 更新 webhook 機制：使用者補充後發送 UPDATE webhook
  - 智慧意圖切換：識別使用者回覆是補充資訊還是新話題
  - 不完整項目提醒：超過 24 小時未補充時發送提醒

  待驗證問題

  - 不完整項目對下游記帳系統的影響
  - 使用者是否偏好「先記錄後補充」vs「補齊後記錄」
  - 更新 webhook 的複雜度和可靠性

  ---
  🔮 v1.8 代墊狀態更新（未來版本）

  狀態更新功能

  - 已收款狀態更新：代墊 → 已收款
  - 已支付狀態更新：需支付 → 已支付
  - 透過 update_last_entry intent 更新代墊狀態
  - 查詢未收回的代墊款項清單

  ---
  🔮 v2 代墊提醒與追蹤（未來版本）

  主動提醒功能

  - 定期提醒未收回的代墊款項
  - 定期提醒未支付的欠款
  - 代墊款項統計和報表
  - 批次更新代墊狀態

  ---

  查詢與分析功能

  - 查詢外幣消費記錄功能（未來項目）
  - 提供歷史匯率查詢功能（如查詢過去某日的匯率）
  - 提供匯率走勢圖表或分析功能

  自訂與進階功能

  - 支援使用者自訂匯率或手動修改匯率
  - 支援多幣別帳戶餘額管理（僅記錄消費，不涉及資產管理）

  非法定貨幣

  - 支援加密貨幣或其他非法定貨幣

---


  🔴 高優先級（v2 核心功能）

  1. 多輪對話處理
  2. 對話脈絡管理
  3. 持久化重試佇列
  4. 即時資訊查詢 API

  🟡 中優先級（v2 增強功能）

  1. 週期性提醒功能
  2. 代墊狀態更新（v1.8）
  3. 完整日誌系統

  🟢 低優先級（v3 實驗性）

  1. 不完整項目先建立後補充
  2. 智慧分析與報表

  ⚪ 待評估（未來可能）

  1. 外幣消費記錄查詢
  2. 匯率走勢圖表
  3. 加密貨幣支援

