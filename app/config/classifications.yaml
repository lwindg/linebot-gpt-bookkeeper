# 記帳分類清單 (v1.5)
# 2026-02-17 最終完全版：確立本質 vs 情境維度，完成家庭類整併

version: "1.5"

# 分類結構：大類/子類 或 大類/子類/細類
categories:
  # ==========================================================================
  # 家庭類別 (日常生存與生活)
  # ==========================================================================
  家庭:
    - 家庭/食材
    - 家庭/水果
    - 家庭/餐飲
    - 家庭/餐飲/早餐
    - 家庭/餐飲/午餐
    - 家庭/餐飲/晚餐
    - 家庭/點心
    - 家庭/飲品
    - 家庭/酒品      # 包含啤酒、紅酒、威士忌等酒精飲品
    - 家庭/興趣與運動
    - 家庭/家電
    - 家庭/用品
    - 家庭/服飾
    - 家庭/公用事業
    - 家庭/通訊/網路費
    - 家庭/通訊/手機費
    - 家庭/娛樂
    - 家庭/圖書
    - 家庭/玩具
    - 家庭/津貼      # 包含小孩零用錢、給父母的錢、紅包等補貼
    - 家庭/雜項

  # ==========================================================================
  # 個人類別 (公司、個人專屬)
  # ==========================================================================
  個人:
    - 個人/餐飲
    - 個人/服飾
    - 個人/用品/雜項
    - 個人/公益
    - 個人/通訊

  # ==========================================================================
  # 行程類別 (登山、旅遊、冒險)
  # ==========================================================================
  行程:
    - 行程/食材      # 包含登山糧食、主食、乾燥飯等
    - 行程/餐飲      # 行程中外食、行前聚餐
    - 行程/飲品      # 行程中的飲料、果汁
    - 行程/點心      # 登山、旅遊中的零食、小點
    - 行程/裝備      # 購買登山器材
    - 行程/租借      # 租借登山器材費用
    - 行程/住宿      # 飯店、山屋、營地費用
    - 行程/協作      # 登山協作員、背工服務費
    - 行程/門票      # 遊樂區、入山等門票費用
    - 行程/保險      # 旅平險、登山險
    - 行程/伴手禮    # 行程中購買的伴手禮
    - 行程/雜項      # 其他行程相關費用（改票費、加購行李等）

  # ==========================================================================
  # 健康與教育
  # ==========================================================================
  健康:
    - 健康/醫療/本人
    - 健康/醫療/家庭成員
    - 健康/保險
    - 健康/保健藥品
  教育:
    - 教育/子女
    - 教育/進修

  # ==========================================================================
  # 工作與禮物
  # ==========================================================================
  工作:
    - 工作/聚餐
  禮物:
    - 禮物/家庭
    - 禮物/外部贈送

  # ==========================================================================
  # 交通類別 (性質化拆解)
  # ==========================================================================
  交通:
    - 交通/車資      # 他人代勞 (計程車、高鐵、公車)
    - 交通/行車      # 自駕變動 (油錢、停車、過路費)
    - 交通/維護      # 養車固定 (稅金、保險、保養、維修)
    - 交通/罰鍰      # 交通罰單

  # ==========================================================================
  # 其他類別
  # ==========================================================================
  其他:
    - 稅費支出
    - 訂閱服務
    - 折扣/優惠
    - 折扣/退稅
    - 其他/手續費     # 跨帳戶/換匯/ATM 手續費

# ==========================================================================
# 映射規則 (回溯相容與自動校正)
# ==========================================================================
mappings:
  交通/接駁: 交通/車資
  交通/大眾運輸: 交通/車資
  交通/加油: 交通/行車
  交通/費用: 交通/維護
  交通/保險: 交通/維護
  家庭/通訊/子女手機: 家庭/通訊/手機費
  家庭/食材/釀造: 家庭/食材
  家庭/點心/實驗: 家庭/點心
  家庭/用品/雜項: 家庭/用品
  家庭支出: 家庭/津貼
  零用錢: 家庭/津貼
  紅包: 家庭/津貼
  行程/食材/主食: 行程/食材
  行程/補給: 行程/食材
  金融/換匯: 轉帳
  換匯手續費: 其他/手續費

# ==========================================================================
# 分類規則
# ==========================================================================
rules:
  meal_three_layer:
    description: "家庭餐飲早餐、午餐、晚餐必須使用三層結構"
    patterns:
      - pattern: "早餐"
        category: "家庭/餐飲/早餐"
      - pattern: "午餐"
        category: "家庭/餐飲/午餐"
      - pattern: "晚餐"
        category: "家庭/餐飲/晚餐"

  transportation_trident:
    - pattern: "計程車|Uber|高鐵|捷運|公車|台鐵|火車|機票|船票"
      category: "交通/車資"
    - pattern: "加油|停車|eTag|過路費|洗車"
      category: "交通/行車"
    - pattern: "保養|維修|輪胎|機油|道路救援|牌照稅|燃料費|燃料稅"
      category: "交通/維護"
    - pattern: "罰單|超速|違停|罰鍰"
      category: "交通/罰鍰"

  trip_simplification:
    - pattern: "乾燥飯|能量棒|登山糧食|能量飲|補給品|鹽錠"
      category: "行程/食材"
    - pattern: "B群|維他命|益生菌|止痛藥|葡萄糖胺"
      category: "健康/保健藥品"
    - pattern: "入園費|入山費|森林遊樂區"
      category: "行程/雜項"

  # 行程餐飲邏輯：非日常專案時，餐飲類一律歸入行程/餐飲
  trip_dining_logic:
    description: "當專案不為『日常』時，所有的外食、餐飲支出應優先歸類為『行程/餐飲』"
    condition: "專案 != '日常'"
    mapping:
      "家庭/餐飲/*": "行程/餐飲"
      "個人/餐飲": "行程/餐飲"

  # 消耗品本質邏輯：衛生、護理用品不論專案，維持在用品類
  consumable_essence_logic:
    - pattern: "乾洗髮|濕紙巾|護唇膏|防曬|面霜|洗面乳|沐浴乳|洗髮精"
      category: "個人/用品/雜項"
    - pattern: "毛巾|浴巾"
      category: "家庭/用品"

  defaults:
    食品類: "家庭"
    個人情境: ["公司聚餐", "同事下午茶"]

  food_beverages:
    - pattern: "啤酒|紅酒|白酒|威士忌|清酒|梅酒|酒精飲料|調酒|酒"
      category: "家庭/酒品"
    - pattern: "咖啡|茶飲|果汁|冰沙"
      category: "家庭/飲品"
    - pattern: "點心|甜點|蛋糕|零食"
      category: "家庭/點心"
      exception: "明確提到「公司」、「同事」→ 工作/聚餐"
    - pattern: "水果|草莓|蜜柑|蘋果|香蕉|葡萄|梨|桃|瓜"
      category: "家庭/水果"
    - pattern: "肉|魚|菜|蛋|米|油|鹽|鮮乳|鮮奶|牛奶"
      category: "家庭/食材"

  special_cases:
    - pattern: "零用錢|紅包|孝親費|生活補貼"
      category: "家庭/津貼"

  # 健康/醫療規則
  health_medical:
    description: "健康/醫療分類規則"
    medical_patterns: "掛號費|門診|診所|看診|就醫|中醫|西醫|醫院|醫療|諮商|治療|診斷|藥品|藥物|感冒|診金|掛號|診後"
    family_keywords: "家人|家庭|爸|媽|爸爸|媽媽|父母|先生|太太|老公|老婆|小孩|孩子|兒子|女兒|妹|弟|妹妹|弟弟"
    category_self: "健康/醫療/本人"
    category_family: "健康/醫療/家庭成員"
