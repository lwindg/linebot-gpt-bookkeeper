# 記帳分類清單 (v1.1)
# 2026-02-17 更新：性質化重構與映射支持

version: "1.1"

# 分類結構：大類/子類 或 大類/子類/細類
categories:
  # ==========================================================================
  # 家庭類別
  # ==========================================================================
  家庭:
    - 家庭/食材
    - 家庭/水果      # 單獨購買或預購的水果品項
    - 家庭/餐飲
    - 家庭/餐飲/早餐  # 早餐類食物
    - 家庭/餐飲/午餐  # 午餐類食物
    - 家庭/餐飲/晚餐  # 晚餐類食物
    - 家庭/點心      # 甜點、蛋糕、零食
    - 家庭/點心/實驗  # 料理實驗性點心
    - 家庭/飲品      # 飲料（咖啡、茶飲、果汁、冰沙等）
    - 家庭/興趣與運動  # 運動用品、樂器、拼圖等
    - 家庭/家電      # 家庭家電用品
    - 家庭/用品      # 家庭一般用品
    - 家庭/用品/雜項  # 廚房用具、保鮮容器、牙線棒等
    - 家庭/服飾      # 家人共用、兒童衣物、家庭採購服飾等
    - 家庭/公用事業   # 水費、電費、瓦斯費、垃圾清潔費等
    - 家庭/通訊      # 包含手機費、網路費、子女手機費等
    - 家庭/雜項      # 家庭雜項支出
    - 家庭/娛樂      # 電影、遊戲、娛樂訂閱等
    - 家庭支出       # 未分類兜底類別

  # ==========================================================================
  # 個人類別
  # ==========================================================================
  個人:
    - 個人/餐飲      # 公司聚餐、單人外食等
    - 個人/服飾      # 自己的衣物、鞋子、飾品等
    - 個人/用品/雜項  # 個人一般用品
    - 個人/公益      # 個人公益或捐款
    - 個人/通訊      # 個人手機月租、行動上網費

  # ==========================================================================
  # 行程類別
  # ==========================================================================
  行程:
    - 行程/食材      # 行程主食食材
    - 行程/餐飲/行前  # 行程前置餐飲
    - 行程/餐飲/登山  # 登山/行程途中餐飲
    - 行程/餐飲/早餐  # 行程中的早餐花費
    - 行程/餐飲/午餐  # 行程中的午餐花費
    - 行程/餐飲/晚餐  # 行程中的晚餐花費
    - 行程/點心      # 登山、戶外活動前後準備的點心補給
    - 行程/飲品      # 行程補給飲品
    - 行程/補給      # 行程補給品
    - 行程/用品
    - 行程/裝備
    - 行程/裝備/登山  # 登山裝備
    - 行程/門票      # 入園費、森林遊樂區等具通行性質的門票
    - 行程/協作      # 登山協作人員的服務費
    - 行程/裝備/租借  # 睡袋、帳篷等行程租賃支出
    - 行程/住宿      # 行程住宿費用
    - 行程/保險      # 行程保險
    - 行程/伴手禮    # 行程伴手禮

  # ==========================================================================
  # 健康類別
  # ==========================================================================
  健康:
    - 健康/醫療/本人  # 本人健康檢查、藥品、就醫等
    - 健康/醫療/家庭成員  # 先生、小孩或其他家人健康相關支出
    - 健康/保險      # 健康相關保險
    - 健康/保健藥品   # 保健品 or 藥品

  # ==========================================================================
  # 教育類別
  # ==========================================================================
  教育:
    - 教育/子女      # 子女的課後班、教材等
    - 教育/進修      # 成人自主進修、講座、學習活動

  # ==========================================================================
  # 工作類別
  # ==========================================================================
  工作:
    - 工作/聚餐      # 工作相關聚餐、請同事點心、飲料等

  # ==========================================================================
  # 禮物類別
  # ==========================================================================
  禮物:
    - 禮物/家庭      # 給家人或家庭聚會使用的禮物
    - 禮物/外部贈送   # 伴手禮、送朋友、同事禮物等

  # ==========================================================================
  # 交通類別
  # ==========================================================================
  交通:
    - 交通/車資      # 他人代勞的移動服務（計程車、高鐵、捷運、公車）
    - 交通/行車      # 讓車子移動的支出（油錢、過路費、停車費、洗車）
    - 交通/維護      # 養車固定成本（牌照稅、燃料費、保險費、保養、救援）
    - 交通/罰鍰      # 交通違規罰金

  # ==========================================================================
  # 其他類別
  # ==========================================================================
  其他:
    - 稅費支出       # 稅費相關支出
    - 訂閱服務       # 各類訂閱服務
    - 折扣/優惠      # 優惠折扣
    - 折扣/退稅      # 退稅類折扣
    - 其他/手續費     # 跨帳戶/換匯/ATM 手續費

# ==========================================================================
# 映射規則 (回溯相容與自動校正)
# ==========================================================================
mappings:
  交通/接駁: 交通/車資
  交通/大眾運輸: 交通/車資
  交通/加油: 交通/行車
  交通/費用: 交通/維護
  交通/保險: 交通/維護
  家庭/通訊/網路費: 家庭/通訊
  家庭/通訊/手機費: 家庭/通訊
  家庭/通訊/子女手機: 家庭/通訊
  家庭/食材/釀造: 家庭/食材
  行程/食材/主食: 行程/食材
  金融/換匯: 轉帳  # 映射為行為意圖
  換匯手續費: 其他/手續費

# ==========================================================================
# 分類規則
# ==========================================================================
rules:
  # 餐飲三層規則（必須嚴格遵守）
  meal_three_layer:
    description: "早餐、午餐、晚餐必須使用三層結構"
    patterns:
      - pattern: "早餐"
        category: "家庭/餐飲/早餐"
      - pattern: "午餐"
        category: "家庭/餐飲/午餐"
      - pattern: "晚餐"
        category: "家庭/餐飲/晚餐"
    禁止: "禁止使用 家庭/餐飲 來分類早餐、午餐、晚餐"

  # 預設規則
  defaults:
    食品類: "家庭"  # 預設所有食品類消費為「家庭」類別
    個人情境: ["公司聚餐", "同事下午茶"]  # 明確個人情境才判定為「個人」

  # 飲品、點心與水果規則
  food_beverages:
    - pattern: "咖啡|茶飲|果汁|冰沙"
      category: "家庭/飲品"
    - pattern: "點心|甜點|蛋糕|零食"
      category: "家庭/點心"
      exception: "明確提到「公司」、「同事」→ 工作/聚餐"
    - pattern: "水果|草莓|蜜柑|蘋果|香蕉|葡萄|梨|桃|瓜"
      category: "家庭/水果"
    - pattern: "肉|魚|菜|蛋|米|油|鹽|鮮乳|鮮奶|牛奶"
      category: "家庭/食材"

  # 交通三叉戟規則
  transportation_trident:
    - pattern: "計程車|Uber|高鐵|捷運|公車|台鐵|火車|機票|船票"
      category: "交通/車資"
    - pattern: "加油|停車|eTag|過路費|洗車"
      category: "交通/行車"
    - pattern: "保養|維修|輪胎|機油|道路救援|牌照稅|燃料費|燃料稅"
      category: "交通/維護"
    - pattern: "罰單|超速|違停|罰鍰"
      category: "交通/罰鍰"

  # 工作聚餐規則
  work_meals:
    - pattern: "請同事|同事|公司聚餐|公司下午茶"
      category: "工作/聚餐"

  # 特殊關鍵字規則
  special_cases:
    - pattern: "零用錢"
      category: "家庭/雜項"

  # 健康/醫療規則
  health_medical:
    description: "健康/醫療分類規則"
    medical_patterns: "掛號費|門診|診所|看診|就醫|中醫|西醫|醫院|醫療|諮商|治療|診斷|藥品|藥物|感冒|診金|掛號|診後"
    family_keywords: "家人|家庭|爸|媽|爸爸|媽媽|父母|先生|太太|老公|老婆|小孩|孩子|兒子|女兒|妹|弟|妹妹|弟弟"
    category_self: "健康/醫療/本人"
    category_family: "健康/醫療/家庭成員"
